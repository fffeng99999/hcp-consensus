# tPBFT (Trust-based PBFT) Configuration
# Optimized for High-Frequency Trading scenarios

#######################################################################
###                   Consensus Configuration                       ###
#######################################################################
[consensus]

# Timeout for proposal step (ms)
# Lower values increase throughput but may cause timeouts
timeout_propose = "1000ms"

# Timeout for prevote step (ms)
timeout_prevote = "500ms"

# Timeout for precommit step (ms)  
timeout_precommit = "500ms"

# Timeout after commit (ms)
# Lower values mean faster block production
timeout_commit = "500ms"

# Make progress as soon as we have all precommits
skip_timeout_commit = false

# Create empty blocks even if no transactions
# Set to true for consistent block production
create_empty_blocks = true

# Interval between empty blocks (0s means as fast as possible)
create_empty_blocks_interval = "0s"

# Peer gossip sleep duration (ms)
peer_gossip_sleep_duration = "100ms"

# Peer query majority sleep duration (ms)
peer_query_maj23_sleep_duration = "200ms"

#######################################################################
###                      P2P Configuration                          ###
#######################################################################
[p2p]

# Enable peer exchange reactor
pex = true

# Seed mode
seed_mode = false

# Maximum number of inbound peers
max_num_inbound_peers = 40

# Maximum number of outbound peers
max_num_outbound_peers = 10

# Send rate (bytes/sec)
send_rate = 20971520  # 20MB/s

# Receive rate (bytes/sec)
recv_rate = 20971520  # 20MB/s

#######################################################################
###                    Mempool Configuration                        ###
#######################################################################
[mempool]

# Mempool version (v0 or v1)
version = "v1"

# Maximum number of transactions in mempool
size = 10000

# Maximum size of a single transaction (bytes)
max_tx_bytes = 1048576  # 1MB

# Maximum size of mempool (bytes)
max_txs_bytes = 1073741824  # 1GB

# Cache size
cache_size = 20000

#######################################################################
###                 tPBFT Specific Settings                        ###
#######################################################################

# Trust score update interval (blocks)
# Update validator trust scores every N blocks
trust_update_interval = 10

# Minimum trust threshold (0.0 - 1.0)
# Validators below this threshold are excluded
min_trust_threshold = 0.5

# Dynamic validator selection
# Adjust validator set based on trust scores
dynamic_validator_selection = true

# Validator selection count (4-7 recommended)
validator_selection_count = 4
